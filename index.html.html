<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Dopamine Clicker™ – Core Loop Prototype</title>
  <style>
    :root{
      --bg:#0e0f13;--panel:#161a22;--soft:#1f2530;--text:#eef2ff;--muted:#b7c1d6;
      --accent:#7c83ff;--good:#34d399;--warn:#f59e0b;--bad:#fb7185;
    }
    *{box-sizing:border-box} body{margin:0;background:linear-gradient(160deg,#0b0c10,#111421 40%,#0b0c10);
      color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
    .wrap{max-width:980px;margin:24px auto;padding:16px}
    .card{background:var(--panel);border:1px solid #223; border-radius:14px; padding:16px; box-shadow:0 8px 24px rgba(0,0,0,.35)}
    .row{display:grid;gap:16px}
    @media(min-width:900px){.row{grid-template-columns:2fr 1fr}}
    h1{margin:0 0 6px;font-size:26px;letter-spacing:.2px}
    .sub{color:var(--muted);font-size:14px;margin-bottom:16px}
    .hud{display:flex;gap:12px;flex-wrap:wrap;margin:10px 0 16px}
    .pill{background:var(--soft);border:1px solid #273042;border-radius:999px;padding:8px 12px;font-size:14px}
    .pill strong{color:#fff;margin-left:6px}
    .meter{height:14px;background:#0b0e15;border:1px solid #2a3445;border-radius:8px;overflow:hidden}
    .bar{height:100%;background:linear-gradient(90deg,var(--accent),#9a67ff);width:32%;transition:width .25s}
    .label{display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin:6px 0 8px}
    .cta{display:block;width:100%;padding:18px;border:0;border-radius:12px;background:linear-gradient(180deg,#818cf8,#6366f1);
      color:white;font-weight:700;font-size:18px;cursor:pointer;box-shadow:0 10px 24px rgba(99,102,241,.35);transition:transform .05s}
    .cta:active{transform:scale(.985)}
    .grid{display:grid;gap:12px}
    .two{grid-template-columns:1fr 1fr}
    .panel{background:var(--soft);border:1px solid #273042;border-radius:12px;padding:12px}
    .panel h3{margin:0 0 8px;font-size:15px}
    .rowline{display:flex;justify-content:space-between;align-items:center;margin:6px 0}
    .btn{padding:8px 10px;border:1px solid #2b3550;background:#121827;color:#e5e9f5;border-radius:8px;cursor:pointer;font-size:13px}
    .btn:hover{border-color:#3b466b}
    .hint{font-size:12px;color:var(--muted)}
    .price{font-weight:700}
    .good{color:var(--good)} .bad{color:var(--bad)} .warn{color:var(--warn)}
    footer{margin:20px 0 6px; text-align:center; color:var(--muted); font-size:12px}
    .mirror{
      position:fixed;inset:0;background:radial-gradient(1200px 600px at 50% 0%,rgba(124,131,255,.12),transparent),
      linear-gradient(180deg,rgba(0,0,0,.2),rgba(0,0,0,.85));
      display:none;align-items:center;justify-content:center;backdrop-filter:blur(2px);z-index:50}
    .mirror .box{max-width:760px;margin:0 16px;background:rgba(20,23,33,.85);border:1px solid #2b3450;border-radius:16px;padding:20px}
    .mirror h2{margin:0 0 8px;font-size:22px}
    .mirror p{color:#ccd4ea;line-height:1.6}
    .close{margin-top:12px}
    .tagline{color:#c8cdfa;font-size:13px;margin:8px 0 12px}
    .badge{display:inline-block;background:#0f1320;border:1px solid #2a3350;border-radius:8px;padding:6px 8px;font-size:12px;margin-right:6px;color:#cbd5e1}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Dopamine Clicker™ — Core Loop</h1>
      <div class="tagline">A satire clicker that mirrors real-life dopamine habits with a live “Dopamine Market,” mood swings, and an inevitable mirror reveal.</div>

      <div class="hud">
        <div class="pill">Clicks: <strong id="clicks">0</strong></div>
        <div class="pill">Coins: <strong id="coins">0</strong></div>
        <div class="pill">Dopamine: <strong id="dopPct">32%</strong></div>
        <div class="pill">Auto-Taps/sec: <strong id="autos">0</strong></div>
        <span class="badge" id="moodBadge">Mood: Neutral</span>
      </div>

      <div class="label"><span>Dopamine Meter</span><span class="hint">Decays over time – keep it up or the loop slows</span></div>
      <div class="meter"><div class="bar" id="bar"></div></div>

      <div class="row" style="margin-top:16px">
        <div class="grid">
          <button class="cta" id="tap">TAP FOR DOPAMINE</button>
          <div class="panel">
            <h3>Upgrades</h3>
            <div class="rowline">
              <span>Auto-Tap (+1/sec)</span>
              <button class="btn" id="buyAuto">Buy (50 coins)</button>
            </div>
            <div class="rowline">
              <span>Stronger Tap (+1 coin/tap)</span>
              <button class="btn" id="buyTap">Buy (40 coins)</button>
            </div>
            <div class="hint">Upgrades increase loop velocity; prices scale with usage.</div>
          </div>
        </div>

        <div class="grid">
          <div class="panel">
            <h3>Dopamine Market</h3>
            <div class="rowline">
              <span>Price: <span id="price" class="price">1.00</span> / token</span>
              <span>Held: <strong id="held">0</strong></span>
            </div>
            <div class="rowline">
              <button class="btn" id="buyTok">Buy 1</button>
              <button class="btn" id="sellTok">Sell 1</button>
            </div>
            <div class="hint">Price wobbles like a mood. Time buys with peaks/troughs.</div>
          </div>

          <div class="panel">
            <h3>Mood Swings</h3>
            <div class="rowline"><span>Current:</span><strong id="moodText">Neutral</strong></div>
            <div class="hint">Mood shifts modify decay & earnings (good/neutral/bad).</div>
          </div>
        </div>
      </div>

      <div class="panel" style="margin-top:16px">
        <h3>Design Notes (for reviewers)</h3>
        <ul class="hint" style="margin:8px 0 0 18px">
          <li>Core loop: tap → earn → buy upgrades → manage decay → trade the Dopamine Market.</li>
          <li>Dynamic mood modifies decay/earnings to emulate real-world streaks/slumps.</li>
          <li>Market tick every 2s (bounded random walk) for simple “buy low/sell high.”</li>
          <li>“Mirror reveal” triggers once dopamine is sustained at high levels—shareable beat.</li>
        </ul>
      </div>

      <footer>
        © 2025 The Elysian Sanctuary™ • Dopamine Clicker™ • Concept & Prototype: Nikita Datar™ — All Rights Reserved
      </footer>
    </div>
  </div>

  <!-- Mirror reveal -->
  <div class="mirror" id="mirror">
    <div class="box">
      <h2>The Infinite Mirror</h2>
      <p>You optimized the loop. The loop optimized you. The more you fed it, the more it fed you back — but only with itself.</p>
      <p class="hint">Satirical beat for streamers: a “gotcha” ending that invites shareable reactions and restarts with new modifiers.</p>
      <button class="btn close" id="closeMirror">Back to the Loop</button>
    </div>
  </div>

  <script>
    // --- State ---
    let clicks=0, coins=0, tapValue=1, autos=0;
    let dopamine=0.32; // 0..1
    let decayBase=0.005; // per tick
    let mood='Neutral'; // Good / Neutral / Bad
    let sustainTimer=0; // time at high dopamine
    // market
    let price=1.00, held=0;

    // --- DOM ---
    const elClicks = document.getElementById('clicks');
    const elCoins = document.getElementById('coins');
    const elDopPct = document.getElementById('dopPct');
    const elAutos = document.getElementById('autos');
    const elBar = document.getElementById('bar');
    const elPrice = document.getElementById('price');
    const elHeld = document.getElementById('held');
    const elMoodText = document.getElementById('moodText');
    const elMoodBadge = document.getElementById('moodBadge');
    const tapBtn = document.getElementById('tap');
    const buyAutoBtn = document.getElementById('buyAuto');
    const buyTapBtn = document.getElementById('buyTap');
    const buyTokBtn = document.getElementById('buyTok');
    const sellTokBtn = document.getElementById('sellTok');
    const mirror = document.getElementById('mirror');
    const closeMirror = document.getElementById('closeMirror');

    function fmt(n){return (Math.round(n*100)/100).toFixed(2)}

    function render(){
      elClicks.textContent = clicks;
      elCoins.textContent = Math.floor(coins);
      elDopPct.textContent = Math.round(dopamine*100)+'%';
      elAutos.textContent = autos;
      elBar.style.width = (dopamine*100)+'%';
      elPrice.textContent = fmt(price);
      elHeld.textContent = held;
      elMoodText.textContent = mood;
      elMoodBadge.textContent = 'Mood: ' + mood;
      elMoodBadge.className = 'badge ' + (mood==='Good'?'good':mood==='Bad'?'bad':'');
    }

    function earnTap(){
      clicks++;
      const moodBoost = mood==='Good'?1.25:mood==='Bad'?0.8:1;
      coins += tapValue * moodBoost;
      dopamine = Math.min(1, dopamine + 0.06);
      render();
    }

    function buyAuto(){
      let cost = 50 + autos*25;
      if(coins>=cost){ coins-=cost; autos++; render(); }
    }
    function buyTap(){
      let cost = 40 + (tapValue-1)*35;
      if(coins>=cost){ coins-=cost; tapValue++; render(); }
    }

    // Market bounded random walk
    function tickMarket(){
      const drift = 0.0;
      const shock = (Math.random()-.5)*0.16; // volatility
      price = Math.max(0.2, Math.min(5, price*(1+drift+shock)));
      render();
    }
    function buyToken(){ if(coins>=price){ coins-=price; held++; render(); } }
    function sellToken(){ if(held>0){ held--; coins+=price; render(); } }

    // Mood engine: flips every ~12–20s with weighted chance
    function flipMood(){
      const r=Math.random();
      if(r<0.28){ mood='Good'; }
      else if(r<0.72){ mood='Neutral'; }
      else { mood='Bad'; }
      render();
    }

    // Main loop (250ms tick)
    setInterval(()=>{
      // Decay modified by mood
      const moodDecay = mood==='Good'? 0.75 : mood==='Bad'? 1.25 : 1.0;
      dopamine = Math.max(0, dopamine - decayBase * moodDecay);

      // Auto-taps
      if(autos>0){
        const moodBoost = mood==='Good'?1.15:mood==='Bad'?0.85:1;
        coins += autos * 0.75 * moodBoost;
        dopamine = Math.min(1, dopamine + 0.02 * Math.min(autos,5));
      }

      // Sustain check for mirror reveal
      if(dopamine>0.9){ sustainTimer += 0.25; } else { sustainTimer = Math.max(0, sustainTimer-0.25); }
      if(sustainTimer>=6){ // ~6s sustained high
        sustainTimer=0;
        mirror.style.display='flex';
      }

      render();
    },250);

    // Timers
    setInterval(tickMarket,2000);
    setInterval(flipMood, 12000 + Math.random()*8000);

    // Events
    tapBtn.addEventListener('click', earnTap);
    buyAutoBtn.addEventListener('click', buyAuto);
    buyTapBtn.addEventListener('click', buyTap);
    buyTokBtn.addEventListener('click', buyToken);
    sellTokBtn.addEventListener('click', sellToken);
    closeMirror.addEventListener('click', ()=>{ mirror.style.display='none'; });

    render();
  </script>
</body>
</html>

